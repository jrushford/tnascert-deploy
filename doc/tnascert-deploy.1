.\" Automatically generated by Pandoc 3.7.0.2
.\"
.TH "" "" "" ""
.SS NAME
tnascert\-deploy \- A tool used to deploy UI certificates to a TrueNAS
host
.SS SYNOPSIS
tnascert\-deploy [\-h] [\-c value] section_name \&...
section_name
.PP
\-c, \(enconfig=\(lqfull path to tnas\-cert.ini file\(rq \-h, \(enhelp
\-v, \(enversion
.SS DESCRIPTION
A tool used to import a TLS certificate and private key into a TrueNAS
SCALE host running \f[B]\f[BI]TrueNAS 24.14, TrueNAS 25+, TrueNAS\-CORE,
or zVault\f[B]\f[R] Once imported, the tool may be configred to activate
the TrueNAS host to use it as the main UI TLS certificate.
.PP
The tnas\-cert.ini file consists of multiple sections The optional
command line arguments section_name may by used to load that particular
configuration.
This allows for maintaining multiple configurations in one
tnas\-cert.ini file where each \f[B]\f[BI]section_name\f[B]\f[R] may be
an individual \f[B]\f[BI]TrueNAS\f[B]\f[R] host.
You may list multiple ***_section_name*** on the command line to loop
through certificate installation on multiple
\f[B]\f[BI]TrueNAS\f[B]\f[R] hosts.
.PP
If the optional argument \f[B]\f[BI]section_name\f[B]\f[R] is not
provided, The \f[B]\f[BI]deploy_default\f[B]\f[R] section name is chosen
to load the configuration if it exists.
.PP
For client authentication, you may use either a TrueNAS
\f[B]\f[BI]api_key\f[B]\f[R] or the \f[B]\f[BI]username\f[B]\f[R] and
\f[B]\f[BI]password\f[B]\f[R] for user with admin privileges.
The \f[B]\f[BI]api_key\f[B]\f[R] is the preferred method for
authentication.
If all three variables are set in a configuration, the
\f[B]\f[BI]api_key\f[B]\f[R] login method will always be used.
If you prefer to use the \f[B]\f[BI]username\f[B]\f[R] and
\f[B]\f[BI]password\f[B]\f[R] ensure only the
\f[B]\f[BI]username\f[B]\f[R] and \f[B]\f[BI]password\f[B]\f[R] are set
in your configuration.
.PP
See the sample \f[B]tnas\-cert.ini\f[R] file.
.SS FILES
The default configuration file is named
\f[B]\f[BI]tnas\-cert.ini\f[B]\f[R] in the current working directory.
You may use the command line switch to use another file name and full
path to the config file.
.SS CONFIG FILE SETTINGS
In order to authenticate with a TrueNAS system, the user must either use
the TrueNAS UI to generate and copy an \f[B]api_key\f[R] or use an admin
\f[B]username\f[R] and \f[B]password\f[R] in the configuration file.
The \f[B]api_key\f[R] is preferred and if all three are defined in the
configuration file, only the \f[B]api_key\f[R] will be used.
Do not include the \f[B]api_key\f[R] if you wish to use the
\f[B]username\f[R] and \f[B]password\f[R].
.IP \(bu 2
\f[B]api_key\f[R] \- (optional, no default) TrueNAS 64 byte API Key for
login the preferred login method).
.IP \(bu 2
\f[B]username\f[R] \- (optional, no default) TrueNAS username with admin
privileges (API key is preferred for login)
.IP \(bu 2
\f[B]password\f[R] \- (optional, no default) TrueNAS password for user
with admin privileges, (API key is preferred for login)
.IP \(bu 2
\f[B]cert_basename\f[R] \- (optional, default is
\f[B]\(lqtnascert\-deploy\(rq\f[R]) basename for the certificate naming
in TrueNAS.
.IP \(bu 2
\f[B]connect_host\f[R] \- (required), TrueNAS DNS Fully Qualified Domain
Name, FQDN, or IP address
.IP \(bu 2
\f[B]client_api\f[R] \- (optional, default is \(lqwsapi\(rq) The TrueNAS
API to use.
Choices are: `wsapi' for the JSON\-RPC 2.0 websocket API or `restapi'
for the RESTful v2.0 API.
.IP \(bu 2
\f[B]delete_old_certs\f[R] \- (optional, default is \f[B]false\f[R])
whether to remove old certificates, default is false
.IP \(bu 2
\f[B]full_chain_path\f[R] \- (required), full path name to the
certificate full_chain.pem
.IP \(bu 2
\f[B]private_key_path\f[R] \- (required), full path name to the
certificate private_key.pem
.IP \(bu 2
\f[B]port\f[R] \- (optional, default is \f[B]443\f[R]) TrueNAS API
endpoint port
.IP \(bu 2
\f[B]protocol\f[R] \- (optional, default is \f[B]\(lqwss\(rq\f[R])
websocket protocol `ws', `wss', `http', or `https'.
`ws' and `wss\(cqare only for TrueNAS\-SCALE systems utilizing the
JSON\-RPC 2.0 websocket API.
Use \(cqhttp' or `https' for systems utilizing the RESTful v2.0 API.
.IP \(bu 2
\f[B]tls_skip_verify\f[R] \- (optional, default is \f[B]false\f[R])
strict SSL cert verification of the endpoint.
.IP \(bu 2
\f[B]add_as_ui_certificate\f[R] \- (optional, default is
\f[B]false\f[R]) install as the active UI certificate if true
.IP \(bu 2
\f[B]add_as_ftp_certificate\f[R] \- (optional, default is
\f[B]false\f[R]) install as the active FTP service certificate if true
.IP \(bu 2
\f[B]add_as_app_certificate\f[R] \- (optional, default is
\f[B]false\f[R]) install as the active APP service certificate if true
to the apps listed in the `app_list'
.IP \(bu 2
\f[B]app_list\f[R] \- (optional, no default) A comma separated list of
docker apps that you wish to have the newly imported certificate used.
Apps in the list are only set to used the certificate if they have one
assigned already.
You must enable `add_as_app_certificate' to process the list.
.IP \(bu 2
\f[B]timeoutSeconds\f[R] \- (optional, default is \f[B]10\f[R]) the
number of seconds after which the truenas client calls fail
.IP \(bu 2
\f[B]debug\f[R] \- (oprional, default is \f[B]false\f[R]) debug logging
if true
.SS NOTES
This tool uses the TrueNAS Scale JSON\-RPC 2.0 API and the TrueNAS
client API module.
Supports versions of \f[B]\f[BI]TrueNAS 25.04\f[B]\f[R] or later
.PP
See Also:
.PD 0
.P
.PD
+ \c
.UR https://github.com/truenas/api_client_golang
TrueNAS api_client_golang
.UE \c
\ + \c
.UR https://www.truenas.com/docs/api/scale_websocket_api.html
TrueNAS websocket API documentaion
.UE \c
.PP
Clone this repository and build the tool using \f[B]\f[BI]go
build\f[B]\f[R]
.SS Contact
John J. Rushford jrushford\(atapache.org
